---
version: "3.4"
services:
  devcontainer:
    environment:
      HISTFILE: /bash_history/.bash_history
    image: builder:latest
    network_mode: host
    build:
      context: .devcontainer
    working_dir: /home/vscode/workspace
    command: "/bin/sh -c \"while sleep 1000; do :; done\""
    user: vscode
    volumes:
      - ".:/home/vscode/workspace:delegated"
      - "~/.gnupg:/home/vscode/.gnupg:z"
      - "/etc/timezone:/etc/timezone:ro"
      - "/etc/localtime:/etc/localtime:ro"
      - "~/.ssh:/home/vscode/.ssh:z"
      - "~/.gitconfig:/home/vscode/.gitconfig:z"
