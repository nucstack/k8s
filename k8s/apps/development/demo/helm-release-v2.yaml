---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: demo-v2
  namespace: development
spec:
  interval: 5m
  chart:
    spec:
      chart: /k8s/charts/kah-common/
      sourceRef:
        kind: GitRepository
        name: flux-system
        namespace: flux-system
      interval: 5m
  values:
    nameOverride: demo-v2
    image:
      repository: ${SECRET_DOCKER_PRIVATE_REGISTRY}/demo
      tag: 0.0.1
    controller:
      labels:
        app: demo-app
        version: v2
    env:
      - name: MESSAGE
        value: test-v2
    service:
      main:
        labels:
          version: v2
        ports:
          http:
            port: 8080
    resources:
      limits:
        cpu: 200m
        memory: 64Mi
      requests:
        cpu: 100m
        memory: 32Mi
